@model RecipeBook.Models.RecipeViewModel

@using (Html.BeginForm("Create", "Recipes", FormMethod.Post))
{
    <div>
        <label for="RecipeName">Recipe Name:</label>
        @Html.TextBoxFor(m => m.RecipeName, new { required = "required" })
        @Html.ValidationMessageFor(m => m.RecipeName)
    </div>

    <div>
        <label for="Description">Description:</label>
        @Html.TextAreaFor(m => m.Description)
    </div>

    <div>
        <label for="Instructions">Instructions:</label>
        @Html.TextAreaFor(m => m.Instructions, new { required = "required" })
        @Html.ValidationMessageFor(m => m.Instructions)
    </div>

     <div>
        <label for="ImageUrl">Image URL:</label>
        @Html.TextBoxFor(m => m.ImageUrl)
    </div>

    <h3>Ingredients:</h3>
<div id="ingredientContainer">
    @for (int i = 0; i < Model.Ingredients.Count; i++)
    {
        <div class="ingredient">
            <label for="Ingredients">Ingredient:</label>
            @Html.TextBoxFor(m => m.Ingredients[i].Name, new { required = "required" })

            <label for="Quantities">Quantity:</label>
            @Html.TextBoxFor(m => m.Ingredients[i].Quantity, new { required = "required" })

            <button type="button" class="removeIngredient">Remove</button>
        </div>
    }
</div>
<button type="button" id="addIngredient">Add Ingredient</button>

    <input type="submit" value="Submit" />
}

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const addIngredientButton = document.getElementById("addIngredient");
        const ingredientContainer = document.getElementById("ingredientContainer");

        addIngredientButton.addEventListener("click", function () {
            const newIngredientDiv = document.createElement("div");
            newIngredientDiv.className = "ingredient";

            newIngredientDiv.innerHTML = `
                <label for="Ingredients">Ingredient:</label>
                <input type="text" name="Ingredients" required />

                <label for="Quantities">Quantity:</label>
                <input type="text" name="Quantities" required />

                <button type="button" class="removeIngredient">Remove</button>
            `;

            ingredientContainer.appendChild(newIngredientDiv);

            // Add event listener for removing the ingredient
            const removeIngredientButton = newIngredientDiv.querySelector(".removeIngredient");
            removeIngredientButton.addEventListener("click", function () {
                ingredientContainer.removeChild(newIngredientDiv);
            });
        });
    });
</script>

